<html>
<head>
<title>movie.blade.php</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #d5b778;}
.s1 { color: #bcbec4;}
.s2 { color: #bababa;}
.s3 { color: #6aab73;}
.s4 { color: #cf8e6d;}
.s5 { color: #bcbec4;}
.s6 { color: #9876aa;}
.s7 { color: #bcbec4;}
.s8 { color: #7a7e85;}
.s9 { color: #6aab73;}
.s10 { color: #2aacb8;}
.s11 { color: #cf8e6d;}
.s12 { color: #7a7e85;}
.s13 { color: #2aacb8;}
.s14 { color: #5f826b; font-style: italic;}
.s15 { color: #56a8f5;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
movie.blade.php</font>
</center></td></tr></table>
<pre><span class="s0">&lt;!DOCTYPE </span><span class="s2">html</span><span class="s0">&gt;</span>
<span class="s0">&lt;html </span><span class="s2">lang</span><span class="s3">=&quot;en&quot;</span><span class="s0">&gt;</span>

<span class="s0">&lt;head&gt;</span>
    <span class="s0">&lt;meta </span><span class="s2">charset</span><span class="s3">=&quot;UTF-8&quot; </span><span class="s0">/&gt;</span>
    <span class="s0">&lt;meta </span><span class="s2">name</span><span class="s3">=&quot;viewport&quot; </span><span class="s2">content</span><span class="s3">=&quot;width=device-width, initial-scale=1.0&quot; </span><span class="s0">/&gt;</span>
    <span class="s0">&lt;title&gt;</span><span class="s1">Document</span><span class="s0">&lt;/title&gt;</span>
    <span class="s0">&lt;script </span><span class="s2">src</span><span class="s3">=&quot;https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js&quot;</span><span class="s0">&gt;&lt;/script&gt;</span>
    <span class="s0">&lt;script </span><span class="s2">src</span><span class="s3">=&quot;https://kit.fontawesome.com/d826f0fb4b.js&quot; </span><span class="s2">crossorigin</span><span class="s3">=&quot;anonymous&quot;</span><span class="s0">&gt;&lt;/script&gt;</span>

    <span class="s0">&lt;link </span><span class="s2">rel</span><span class="s3">=&quot;stylesheet&quot; </span><span class="s2">href</span><span class="s3">=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;/head&gt;</span>
<span class="s4">&lt;?php</span>
<span class="s6">$user </span><span class="s7">= null; </span><span class="s8">// Define a default value for the $user variable</span>
<span class="s4">if </span><span class="s7">(session()-&gt;has(</span><span class="s9">'user'</span><span class="s7">)) {</span>
    <span class="s6">$user </span><span class="s7">= session(</span><span class="s9">'user'</span><span class="s7">);</span>
<span class="s7">}</span>
<span class="s4">?&gt;</span>

<span class="s4">&lt;?php if </span><span class="s7">(session()-&gt;has(</span><span class="s9">'admin'</span><span class="s7">)) {</span>
    <span class="s6">$admin </span><span class="s7">= session(</span><span class="s9">'admin'</span><span class="s7">);</span>
<span class="s7">} </span><span class="s4">?&gt;</span>


<span class="s0">&lt;body&gt;</span>

<span class="s4">&lt;?php</span>
<span class="s8">// Check if admin session exists</span>
<span class="s6">$isAdmin </span><span class="s7">= false;</span>
<span class="s4">if </span><span class="s7">(session()-&gt;has(</span><span class="s9">'admin'</span><span class="s7">)) {</span>
    <span class="s6">$isAdmin </span><span class="s7">= true;</span>
<span class="s7">}</span>
<span class="s4">?&gt;</span>



    <span class="s0">&lt;script&gt;&lt;/script&gt;</span>
    <span class="s4">@include(</span><span class="s9">'search'</span><span class="s4">)</span>
    <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;innerbody&quot;</span><span class="s0">&gt;</span>
        <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;title-div&quot;</span><span class="s0">&gt;</span>
            <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;title&quot;</span><span class="s0">&gt;</span>
                <span class="s0">&lt;h1&gt;</span>
                    <span class="s7">{{ </span><span class="s6">$data</span><span class="s7">-&gt;title }}</span>
                <span class="s0">&lt;/h1&gt;</span>
                <span class="s0">&lt;ul </span><span class="s2">id</span><span class="s3">=&quot;under-title-div&quot;</span><span class="s0">&gt;</span>
                    <span class="s0">&lt;a&gt;</span>
                        <span class="s4">&lt;?php echo </span><span class="s7">substr(</span><span class="s6">$data</span><span class="s7">-&gt;release_date, </span><span class="s10">0</span><span class="s7">, </span><span class="s10">4</span><span class="s7">); </span><span class="s4">?&gt;</span>
                    <span class="s0">&lt;/a&gt;</span>
                    <span class="s0">&lt;li&gt;</span>
                        <span class="s4">&lt;?php echo </span><span class="s7">intval(</span><span class="s6">$data</span><span class="s7">-&gt;runtime / </span><span class="s10">60</span><span class="s7">);</span>
                        <span class="s4">echo </span><span class="s9">'h '</span><span class="s7">;</span>
                        <span class="s4">echo </span><span class="s6">$data</span><span class="s7">-&gt;runtime % </span><span class="s10">60</span><span class="s7">;</span>
                        <span class="s4">echo </span><span class="s9">'m'</span><span class="s7">; </span><span class="s4">?&gt;</span>
                    <span class="s0">&lt;/li&gt;</span>
                <span class="s0">&lt;/ul&gt;</span>
            <span class="s0">&lt;/div&gt;</span>
            <span class="s0">&lt;h3 </span><span class="s2">class</span><span class="s3">=&quot;h3&quot;</span><span class="s0">&gt;&lt;span </span><span class="s2">class</span><span class="s3">=&quot;fa fa-star checked&quot;</span><span class="s0">&gt;&lt;/span&gt;</span>
                <span class="s4">&lt;?php echo </span><span class="s7">substr(</span><span class="s6">$data</span><span class="s7">-&gt;vote_average, </span><span class="s10">0</span><span class="s7">, </span><span class="s10">3</span><span class="s7">); </span><span class="s4">?&gt; </span><span class="s1">/ 10</span>
            <span class="s0">&lt;/h3&gt;</span>
            <span class="s0">&lt;h3 </span><span class="s2">class</span><span class="s3">=&quot;h3&quot; </span><span class="s2">id</span><span class="s3">=&quot;popularity-header&quot;</span><span class="s0">&gt;&lt;i </span><span class="s2">class</span><span class="s3">=&quot;fa fa-eye&quot;</span><span class="s0">&gt;&lt;/i&gt;</span>
                <span class="s4">&lt;?php echo </span><span class="s7">intval(</span><span class="s6">$data</span><span class="s7">-&gt;popularity); </span><span class="s4">?&gt;</span>
            <span class="s0">&lt;/h3&gt;</span>
        <span class="s0">&lt;/div&gt;</span>
        <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;backdrop&quot;</span><span class="s0">&gt;</span>
            <span class="s4">&lt;?php</span>
            <span class="s6">$posterPath </span><span class="s7">= </span><span class="s6">$data</span><span class="s7">-&gt;poster_path;</span>
            <span class="s4">if </span><span class="s7">(</span><span class="s6">$isAdmin</span><span class="s7">) {</span>
                <span class="s8">// Display an edit button for the admin to change the image</span>
                <span class="s4">echo </span><span class="s9">'&lt;button onclick=&quot;editImage()&quot;&gt;Edit Image&lt;/button&gt;'</span><span class="s7">;</span>


            <span class="s7">}</span>

            <span class="s8">// Display the image with its current URL</span>
            <span class="s4">echo </span><span class="s9">'&lt;img id=&quot;moviePoster&quot; src=&quot;https://image.tmdb.org/t/p/w500' </span><span class="s7">. </span><span class="s6">$posterPath </span><span class="s7">. </span><span class="s9">'&quot;/&gt;'</span><span class="s7">;</span>
            <span class="s4">?&gt;</span>
            <span class="s4">&lt;?php</span>
<span class="s8">// Check if admin or user session exists</span>
            <span class="s6">$isAdmin </span><span class="s7">= session()-&gt;has(</span><span class="s9">'admin'</span><span class="s7">);</span>
            <span class="s6">$isUser </span><span class="s7">= session()-&gt;has(</span><span class="s9">'user'</span><span class="s7">);</span>
            <span class="s4">?&gt;</span>


        <span class="s0">&lt;/div&gt;</span>



        <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;genres&quot;</span><span class="s0">&gt;</span>
            <span class="s4">@foreach (</span><span class="s6">$data</span><span class="s7">-&gt;genres </span><span class="s4">as </span><span class="s6">$e</span><span class="s4">)</span>
                <span class="s0">&lt;button </span><span class="s2">class</span><span class="s3">='genrebuttons'</span><span class="s0">&gt;</span><span class="s7">{{ </span><span class="s6">$e</span><span class="s7">-&gt;name }}</span><span class="s0">&lt;/button&gt;</span>
            <span class="s4">@endforeach</span>
        <span class="s0">&lt;/div&gt;</span>
        <span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=&quot;title-div&quot;</span><span class="s0">&gt;</span>
            <span class="s0">&lt;h2&gt;</span><span class="s1">Overview</span><span class="s0">&lt;/h2&gt;</span>
            <span class="s4">&lt;?php if </span><span class="s7">(</span><span class="s6">$isAdmin </span><span class="s7">|| </span><span class="s6">$isUser</span><span class="s7">): </span><span class="s4">?&gt;</span>
            <span class="s0">&lt;button </span><span class="s2">id</span><span class="s3">=&quot;watchlist-button&quot;</span><span class="s0">&gt;</span>
                <span class="s0">&lt;i </span><span class="s2">class</span><span class="s3">=&quot;fa-solid fa-plus plus&quot;</span><span class="s0">&gt;&lt;/i&gt;</span>
                <span class="s1">Add to watchlist</span>
            <span class="s0">&lt;/button&gt;</span>
            <span class="s4">&lt;?php endif</span><span class="s7">; </span><span class="s4">?&gt;</span>
        <span class="s0">&lt;/div&gt;</span>
        <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;overview&quot;</span><span class="s0">&gt;</span>
            <span class="s4">&lt;?php</span>
            <span class="s7">print_r(</span><span class="s9">&quot;&lt;p&gt;</span><span class="s6">$data</span><span class="s7">-&gt;overview</span><span class="s9">&lt;/p&gt;&quot;</span><span class="s7">);</span>
            <span class="s4">?&gt;</span>

        <span class="s0">&lt;/div&gt;</span>

        <span class="s4">&lt;?php if </span><span class="s7">(</span><span class="s6">$isAdmin</span><span class="s7">): </span><span class="s4">?&gt;</span>
        <span class="s0">&lt;button </span><span class="s2">id</span><span class="s3">=&quot;editOverviewButton&quot;</span><span class="s0">&gt;</span><span class="s1">Edit Overview</span><span class="s0">&lt;/button&gt;</span>
        <span class="s4">&lt;?php endif</span><span class="s7">; </span><span class="s4">?&gt;</span>
        <span class="s0">&lt;div&gt;</span>
            <span class="s0">&lt;h4 </span><span class="s2">id</span><span class="s3">=&quot;commentsheader&quot;</span><span class="s0">&gt;</span><span class="s1">Reviews</span><span class="s0">&lt;/h4&gt;</span>
            <span class="s0">&lt;div </span><span class="s2">class</span><span class="s3">=commentsForm</span><span class="s0">&gt;</span>
                <span class="s0">&lt;form </span><span class="s2">id</span><span class="s3">=&quot;commentForm&quot; </span><span class="s2">type</span><span class="s3">=&quot;submit&quot;</span><span class="s0">&gt;</span>
                    <span class="s0">&lt;textarea </span><span class="s2">id</span><span class="s3">=&quot;commentInput&quot; </span><span class="s2">name</span><span class="s3">=&quot;Text1&quot; </span><span class="s2">cols</span><span class="s3">=&quot;40&quot; </span><span class="s2">rows</span><span class="s3">=&quot;5&quot; </span><span class="s2">placeholder</span><span class="s3">=&quot;What did you think of the movie&quot;</span><span class="s0">&gt;&lt;/textarea&gt;</span>
                    <span class="s0">&lt;button </span><span class="s2">class</span><span class="s3">=&quot;commentButton&quot; </span><span class="s2">type</span><span class="s3">=&quot;submit&quot;</span><span class="s0">&gt;</span><span class="s1">Submit</span><span class="s0">&lt;/button&gt;</span>
                <span class="s0">&lt;/form&gt;</span>
            <span class="s0">&lt;/div&gt;</span>


        <span class="s0">&lt;/div&gt;</span>
    <span class="s0">&lt;/div&gt;</span>
    <span class="s0">&lt;script&gt;</span>
        <span class="s1">$(document).ready(</span><span class="s11">function</span><span class="s1">() {</span>
            <span class="s4">&lt;?php if </span><span class="s7">(</span><span class="s6">$isAdmin</span><span class="s7">): </span><span class="s4">?&gt;</span>
            <span class="s12">// Click event for the 'Edit Overview' button</span>
            <span class="s1">$(</span><span class="s3">'#editOverviewButton'</span><span class="s1">).on(</span><span class="s3">'click'</span><span class="s1">, </span><span class="s11">function</span><span class="s1">() {</span>
                <span class="s11">var </span><span class="s1">newOverviewText = prompt(</span><span class="s3">'Enter the new overview text:'</span><span class="s1">);</span>
                <span class="s11">if </span><span class="s1">(newOverviewText !== </span><span class="s11">null </span><span class="s1">&amp;&amp; newOverviewText !== </span><span class="s3">''</span><span class="s1">) {</span>
                    <span class="s1">$(</span><span class="s3">'#overview'</span><span class="s1">).html(</span><span class="s3">'&lt;p&gt;' </span><span class="s1">+ newOverviewText + </span><span class="s3">'&lt;/p&gt;'</span><span class="s1">);</span>
                <span class="s1">}</span>
            <span class="s1">});</span>
            <span class="s4">&lt;?php endif</span><span class="s7">; </span><span class="s4">?&gt;</span>
        <span class="s1">});</span>

        <span class="s11">function </span><span class="s1">editImage() {</span>
            <span class="s12">// Prompt the admin to input a new image URL or upload a new image</span>

            <span class="s12">// Example: Prompt input for a new image URL</span>
            <span class="s11">let </span><span class="s1">newURL = prompt(</span><span class="s3">'Enter new image URL:'</span><span class="s1">);</span>
            <span class="s11">if </span><span class="s1">(newURL) {</span>
                <span class="s12">// If a new URL is provided, update the image source (src)</span>
                <span class="s1">document.getElementById(</span><span class="s3">'moviePoster'</span><span class="s1">).src = newURL;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
    <span class="s0">&lt;/script&gt;</span>


<span class="s0">&lt;/body&gt;</span>
<span class="s0">&lt;script </span><span class="s2">src</span><span class="s3">=&quot;https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js&quot;</span><span class="s0">&gt;&lt;/script&gt;</span>

<span class="s0">&lt;script&gt;</span>
    <span class="s1">async </span><span class="s11">function </span><span class="s1">getWatchlist(id) {</span>
        <span class="s11">return </span><span class="s1">fetch(</span><span class="s3">`/api/getUserWatchlist/</span><span class="s1">${id}</span><span class="s3">`</span><span class="s1">, {</span>
            <span class="s1">method: </span><span class="s3">&quot;GET&quot;</span>
        <span class="s1">}).then(async (result) =&gt; {</span>
            <span class="s11">return </span><span class="s1">result.json();</span>




    <span class="s1">console.log(</span><span class="s4">&lt;?php echo </span><span class="s6">$user</span><span class="s7">; </span><span class="s4">?&gt;</span><span class="s1">);</span>
    <span class="s1">console.log(</span><span class="s3">&quot;Hello&quot;</span><span class="s1">);</span>
    <span class="s11">let </span><span class="s1">comments = document.querySelector(</span><span class="s3">&quot;#comments&quot;</span><span class="s1">);</span>
    <span class="s11">let </span><span class="s1">key = </span><span class="s3">&quot;</span><span class="s4">&lt;?php echo </span><span class="s6">$key</span><span class="s7">-&gt;results[</span><span class="s10">0</span><span class="s7">]-&gt;key; </span><span class="s4">?&gt;</span><span class="s3">&quot;</span><span class="s1">;</span>
    <span class="s11">var </span><span class="s1">backdrop = document.querySelector(</span><span class="s3">'#backdrop'</span><span class="s1">);</span>
    <span class="s1">backdrop.innerHTML += </span><span class="s3">`&lt;iframe src=&quot;https://www.youtube.com/embed/</span><span class="s1">${key}</span><span class="s3">?controls=0&amp;autoplay=0&amp;mute=1&quot;&gt;&lt;/iframe&gt;`</span><span class="s1">;</span>

    <span class="s11">let </span><span class="s1">isAdded = </span><span class="s11">false</span><span class="s1">;</span>
    <span class="s11">let </span><span class="s1">button = document.querySelector(</span><span class="s3">'#watchlist-button'</span><span class="s1">);</span>




    <span class="s4">@if (</span><span class="s7">session()-&gt;has(</span><span class="s9">'user'</span><span class="s7">) &amp;&amp; (session()-&gt;has(</span><span class="s9">'admin'</span><span class="s7">) )</span><span class="s4">)</span>
    <span class="s11">let </span><span class="s1">a = await $.ajax({</span>
        <span class="s1">url: </span><span class="s3">`/api/getWatchlist/</span><span class="s7">{{ </span><span class="s6">$user</span><span class="s7">-&gt;id }}</span><span class="s3">/</span><span class="s1">${window.location.pathname.substr(</span><span class="s13">7</span><span class="s1">)}</span><span class="s3">`</span><span class="s1">,</span>
        <span class="s1">method: </span><span class="s3">'GET'</span><span class="s1">,</span>
    <span class="s1">}).done((res) =&gt; {</span>
        <span class="s12">//if current movie is watchlisted by current user</span>
        <span class="s11">if </span><span class="s1">(res.length &gt; </span><span class="s13">0</span><span class="s1">) {</span>
            <span class="s1">button.style = </span><span class="s3">'background-color: grey'</span><span class="s1">;</span>
            <span class="s1">button.innerHTML =</span>
                <span class="s3">'&lt;i class=&quot;fa-solid fa-check plus&quot;&gt;&lt;/i&gt; Remove from watchlist'</span><span class="s1">;</span>
            <span class="s1">isAdded = </span><span class="s11">true</span><span class="s1">;</span>
        <span class="s1">}</span>
        <span class="s12">//if current movie is not watchlisted by current user</span>
        <span class="s11">else </span><span class="s1">{</span>
            <span class="s1">button.style = </span><span class="s3">'background-color: yellow'</span><span class="s1">;</span>
            <span class="s1">button.innerHTML =</span>
                <span class="s3">'&lt;i class=&quot;fa-solid fa-plus plus&quot;&gt;&lt;/i&gt; Add to watchlist'</span><span class="s1">;</span>
            <span class="s1">isAdded = </span><span class="s11">false</span><span class="s1">;</span>
        <span class="s1">}</span>
    <span class="s1">})</span>
    <span class="s12">//if not logged in</span>
    <span class="s4">@else</span>
    <span class="s1">document.querySelector(</span><span class="s3">'#watchlist-button'</span><span class="s1">).style.visibility = </span><span class="s3">'hidden'</span><span class="s1">;</span>
    <span class="s4">@endif</span>
    <span class="s1">}</span>

    <span class="s1">getWatchlist();</span>

    <span class="s1">button.addEventListener(</span><span class="s3">'click'</span><span class="s1">, async (event) =&gt; {</span>
        <span class="s11">if </span><span class="s1">(isAdded) {</span>
            <span class="s1">await deleteFromWatchlist();</span>
        <span class="s1">} </span><span class="s11">else </span><span class="s1">{</span>
            <span class="s1">await addToWatchlist();</span>
        <span class="s1">}</span>
        <span class="s1">getWatchlist();</span>
    <span class="s1">})</span>

    <span class="s1">async </span><span class="s11">function </span><span class="s1">deleteFromWatchlist() {</span>
        <span class="s4">@if (</span><span class="s7">session()-&gt;has(</span><span class="s9">'user'</span><span class="s7">) &amp;&amp; (session()-&gt;has(</span><span class="s9">'admin'</span><span class="s7">))</span><span class="s4">)</span>
            <span class="s11">return </span><span class="s1">fetch(</span><span class="s3">'/api/removeFromWatchlist'</span><span class="s1">, {</span>
                <span class="s1">method: </span><span class="s3">'POST'</span><span class="s1">,</span>
                <span class="s1">body: JSON.stringify({</span>
                    <span class="s1">movie_id: parseInt(window.location.pathname.substr(</span><span class="s13">7</span><span class="s1">), </span><span class="s13">10</span><span class="s1">),</span>
                    <span class="s1">user_id: </span><span class="s7">{{ </span><span class="s6">$user</span><span class="s7">-&gt;id }}</span>
                <span class="s1">}),</span>
                <span class="s1">headers: {</span>
                    <span class="s3">&quot;Content-Type&quot;</span><span class="s1">: </span><span class="s3">&quot;application/json&quot;</span><span class="s1">,</span>
                <span class="s1">}</span>
            <span class="s1">})</span>
        <span class="s4">@endif</span>
    <span class="s1">}</span>

    <span class="s1">async </span><span class="s11">function </span><span class="s1">addToWatchlist() {</span>
        <span class="s4">@if (</span><span class="s7">session()-&gt;has(</span><span class="s9">'user'</span><span class="s7">) &amp;&amp; (session()-&gt;has(</span><span class="s9">'$admin'</span><span class="s7">)) </span><span class="s4">)</span>
            <span class="s11">return </span><span class="s1">$.ajax({</span>
                <span class="s1">url: </span><span class="s3">`/api/watchlist/</span><span class="s1">${window.location.pathname.substr(</span><span class="s13">7</span><span class="s1">)}</span><span class="s3">/</span><span class="s7">{{ </span><span class="s6">$user</span><span class="s7">,</span><span class="s6">$admin</span><span class="s7">-&gt;id }}</span><span class="s3">`</span><span class="s1">,</span>
                <span class="s1">method: </span><span class="s3">&quot;GET&quot;</span><span class="s1">,</span>
                <span class="s1">success: (result) =&gt; {</span>
                    <span class="s1">console.log(result);</span>
                <span class="s1">}</span>
            <span class="s1">})</span>
        <span class="s4">@endif</span>
    <span class="s1">}</span>


    <span class="s11">function </span><span class="s1">postComment(movieId, body) {</span>
        <span class="s4">@if (</span><span class="s7">session()-&gt;has(</span><span class="s9">'user'</span><span class="s7">)</span><span class="s4">)</span>
            <span class="s1">$.ajax({</span>
                <span class="s1">url: </span><span class="s3">`/api/post/</span><span class="s1">${movieId}</span><span class="s3">/</span><span class="s1">${body}</span><span class="s3">/</span><span class="s7">{{ </span><span class="s6">$user </span><span class="s7">-&gt;id }}</span><span class="s3">`</span><span class="s1">,</span>
                <span class="s1">type: </span><span class="s3">&quot;GET&quot;</span><span class="s1">,</span>
                <span class="s1">success: (result) =&gt; {</span>
                    <span class="s1">console.log(result)</span>
                <span class="s1">}</span>
            <span class="s1">})</span>
        <span class="s4">@endif</span>
    <span class="s1">}</span>

    <span class="s11">function </span><span class="s1">deleteComment(commentsId, userId) {</span>
        <span class="s4">@if (</span><span class="s7">session()-&gt;has(</span><span class="s9">'user'</span><span class="s7">)</span><span class="s4">)</span>
            <span class="s11">if </span><span class="s1">(userId == </span><span class="s7">{{ </span><span class="s6">$user</span><span class="s7">-&gt;id }}</span><span class="s1">) {</span>
                <span class="s1">$.ajax({</span>
                    <span class="s1">url: </span><span class="s3">`/api/delete/</span><span class="s1">${commentsId}</span><span class="s3">`</span><span class="s1">,</span>
                    <span class="s1">type: </span><span class="s3">&quot;GET&quot;</span><span class="s1">,</span>
                    <span class="s1">success: (result) =&gt; {</span>
                        <span class="s1">refreshComments()</span>
                    <span class="s1">}</span>
                <span class="s1">})</span>
            <span class="s1">} </span><span class="s11">else </span><span class="s1">{</span>
                <span class="s1">alert(</span><span class="s3">&quot;Not ur comment&quot;</span><span class="s1">)</span>
            <span class="s1">}</span>
        <span class="s4">@endif</span>
    <span class="s1">}</span>

    <span class="s1">async </span><span class="s11">function </span><span class="s1">getUsername(userId) {</span>
        <span class="s14">/***</span>
         <span class="s14">* http call to endpoint querying database model User on userId getting the username</span>
         <span class="s14">* takes @String userId</span>
         <span class="s14">* return @String username</span>
         <span class="s14">*/</span>
        <span class="s11">let </span><span class="s1">data = await $.ajax({</span>
            <span class="s1">url: </span><span class="s3">`/api/username/</span><span class="s1">${userId}</span><span class="s3">`</span><span class="s1">,</span>
            <span class="s1">method: </span><span class="s3">&quot;GET&quot;</span><span class="s1">,</span>
            <span class="s1">success: (result) =&gt; {</span>
                <span class="s1">console.log(result)</span>
            <span class="s1">}</span>
        <span class="s1">}).done((res) =&gt; {</span>
            <span class="s11">return </span><span class="s1">res;</span>
        <span class="s1">})</span>
        <span class="s11">return </span><span class="s1">data;</span>
    <span class="s1">}</span>


    <span class="s1">}</span>

    <span class="s12">// Array of comments</span>
    <span class="s11">let </span><span class="s1">commentsArray = [</span>
        <span class="s3">&quot;This is comment 1&quot;</span><span class="s1">,</span>
        <span class="s3">&quot;This is comment 2&quot;</span><span class="s1">,</span>
        <span class="s3">&quot;This is comment 3&quot;</span><span class="s1">,</span>
        <span class="s12">// Add more comments as needed</span>
    <span class="s1">];</span>

    <span class="s12">// Get the element to display comments</span>
    <span class="s11">let </span><span class="s1">commentsList = document.getElementById(</span><span class="s3">&quot;displayComments&quot;</span><span class="s1">);</span>

    <span class="s12">// Loop through commentsArray and create list items for each comment</span>
    <span class="s1">commentsArray.forEach(comment =&gt; {</span>
        <span class="s11">let </span><span class="s1">listItem = document.createElement(</span><span class="s3">&quot;li&quot;</span><span class="s1">);</span>
        <span class="s1">listItem.textContent = comment;</span>
        <span class="s1">commentsList.appendChild(listItem);</span>
    <span class="s1">});</span>


<span class="s0">&lt;/script&gt;</span>

<span class="s0">&lt;/html&gt;</span>
<span class="s0">&lt;style </span><span class="s2">scoped</span><span class="s0">&gt;</span>
    <span class="s11">@import </span><span class="s0">url</span><span class="s1">(</span><span class="s3">'https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&amp;display=swap'</span><span class="s1">);</span>

    <span class="s1">.</span><span class="s0">comments </span><span class="s1">{</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#commentInput </span><span class="s1">{</span>
        <span class="s2">width</span><span class="s1">: </span><span class="s13">30</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">height</span><span class="s1">: </span><span class="s13">5</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">resize</span><span class="s1">: </span><span class="s3">none</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">commentsForm </span><span class="s1">{</span>
        <span class="s2">margin-left</span><span class="s1">: </span><span class="s13">3</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">commentsUser </span><span class="s1">{</span>
        <span class="s2">margin-left</span><span class="s1">: </span><span class="s13">2</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">commentsBody </span><span class="s1">{</span>
        <span class="s2">width</span><span class="s1">: </span><span class="s13">75</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">margin-left</span><span class="s1">: </span><span class="s13">3</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">white-space</span><span class="s1">: </span><span class="s3">pre-wrap</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">commentsDelete </span><span class="s1">{</span>
        <span class="s2">margin-left</span><span class="s1">: </span><span class="s13">2</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">margin-top</span><span class="s1">: </span><span class="s13">1</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">iframe </span><span class="s1">{</span>
        <span class="s2">aspect-ratio</span><span class="s1">: </span><span class="s13">16 </span><span class="s1">/ </span><span class="s13">9</span><span class="s1">;</span>
        <span class="s2">height</span><span class="s1">: </span><span class="s13">600</span><span class="s1">;</span>
        <span class="s2">width</span><span class="s1">: </span><span class="s13">100</span><span class="s1">%;</span>
    <span class="s1">}</span>

    <span class="s0">#backdrop</span><span class="s1">,</span>
    <span class="s0">#title </span><span class="s1">{</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
        <span class="s2">justify-content</span><span class="s1">: </span><span class="s3">left</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">h1 </span><span class="s1">{</span>
        <span class="s2">margin-bottom</span><span class="s1">: -</span><span class="s13">1</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#title </span><span class="s1">{</span>
        <span class="s2">flex-direction</span><span class="s1">: </span><span class="s3">column</span><span class="s1">;</span>
        <span class="s2">width</span><span class="s1">: </span><span class="s13">20</span><span class="s1">%;</span>
        <span class="s2">margin-right</span><span class="s1">: </span><span class="s13">55</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">img </span><span class="s1">{</span>
        <span class="s2">width</span><span class="s1">: </span><span class="s13">400</span><span class="s3">px</span><span class="s1">;</span>
        <span class="s2">height</span><span class="s1">: </span><span class="s13">600</span><span class="s3">px</span><span class="s1">;</span>
        <span class="s2">border-radius</span><span class="s1">: </span><span class="s13">2</span><span class="s3">px</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#genres</span><span class="s1">,</span>
    <span class="s0">h2</span><span class="s1">,</span>
    <span class="s0">#overview </span><span class="s1">{</span>
        <span class="s2">padding</span><span class="s1">: </span><span class="s13">0 2</span><span class="s3">rem </span><span class="s13">0 2</span><span class="s3">rem</span>
    <span class="s1">}</span>

    <span class="s0">body </span><span class="s1">{</span>
        <span class="s2">min-height</span><span class="s1">: </span><span class="s13">100</span><span class="s3">vh</span><span class="s1">;</span>
        <span class="s2">height</span><span class="s1">: </span><span class="s13">100</span><span class="s1">%;</span>
    <span class="s1">}</span>

    <span class="s0">#genres </span><span class="s1">{</span>
        <span class="s2">padding-bottom</span><span class="s1">: </span><span class="s13">5</span><span class="s3">vh</span><span class="s1">;</span>
        <span class="s2">padding-top</span><span class="s1">: </span><span class="s13">5</span><span class="s3">vh</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">genrebuttons </span><span class="s1">{</span>
        <span class="s2">background-color</span><span class="s1">: </span><span class="s15">#777</span><span class="s1">;</span>
        <span class="s2">margin-right</span><span class="s1">: </span><span class="s13">2</span><span class="s3">vh</span><span class="s1">;</span>
        <span class="s2">border-color</span><span class="s1">: </span><span class="s3">white</span><span class="s1">;</span>
        <span class="s2">border-radius</span><span class="s1">: </span><span class="s13">20</span><span class="s3">px</span><span class="s1">;</span>
        <span class="s2">padding</span><span class="s1">: </span><span class="s13">5</span><span class="s3">px </span><span class="s13">10</span><span class="s3">px</span><span class="s1">;</span>
        <span class="s2">font-weight</span><span class="s1">: </span><span class="s3">bold</span><span class="s1">;</span>
        <span class="s2">color</span><span class="s1">: </span><span class="s3">white</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">genrebuttons</span><span class="s1">:</span><span class="s0">hover </span><span class="s1">{</span>
        <span class="s2">background-color</span><span class="s1">: </span><span class="s15">#555</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#commentsheader </span><span class="s1">{</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
        <span class="s2">justify-content</span><span class="s1">: </span><span class="s3">left</span><span class="s1">;</span>
        <span class="s2">padding</span><span class="s1">: </span><span class="s13">5</span><span class="s3">rem </span><span class="s13">2</span><span class="s3">rem </span><span class="s13">0 2</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">body </span><span class="s1">{</span>
        <span class="s2">background-color</span><span class="s1">: </span><span class="s15">#000</span><span class="s1">;</span>
        <span class="s2">color</span><span class="s1">: </span><span class="s3">white</span><span class="s1">;</span>
        <span class="s2">margin</span><span class="s1">: </span><span class="s13">0</span><span class="s1">;</span>
        <span class="s2">padding</span><span class="s1">: </span><span class="s13">0</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">* </span><span class="s1">{</span>
        <span class="s2">font-family</span><span class="s1">: </span><span class="s0">Montserrat</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#innerbody </span><span class="s1">{</span>
        <span class="s2">background-color</span><span class="s1">: </span><span class="s15">#111</span><span class="s1">;</span>
        <span class="s2">height</span><span class="s1">: </span><span class="s13">100</span><span class="s1">%;</span>
        <span class="s2">margin</span><span class="s1">: </span><span class="s3">auto</span><span class="s1">;</span>
        <span class="s2">padding</span><span class="s1">: </span><span class="s13">0 2</span><span class="s3">rem </span><span class="s13">0 2</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">max-width</span><span class="s1">: </span><span class="s13">75</span><span class="s1">%;</span>
    <span class="s1">}</span>

    <span class="s0">#under-title-div </span><span class="s1">{</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
        <span class="s2">padding</span><span class="s1">: </span><span class="s13">0</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#under-title-div</span><span class="s1">&gt;</span><span class="s0">* </span><span class="s1">{</span>
        <span class="s2">margin-right</span><span class="s1">: </span><span class="s13">2</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">font-size</span><span class="s1">: </span><span class="s13">0.8</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">opacity</span><span class="s1">: </span><span class="s13">0.7</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#title-div </span><span class="s1">{</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">h3 </span><span class="s1">{</span>
        <span class="s2">color</span><span class="s1">: </span><span class="s3">white</span><span class="s1">;</span>
        <span class="s2">font-size</span><span class="s1">: </span><span class="s13">14</span><span class="s3">px</span><span class="s1">;</span>
        <span class="s2">font-weight</span><span class="s1">: </span><span class="s13">700</span><span class="s1">;</span>
        <span class="s2">text-align</span><span class="s1">: </span><span class="s3">center</span><span class="s1">;</span>
        <span class="s2">margin-top</span><span class="s1">: </span><span class="s13">1.5</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">h3</span><span class="s1">:</span><span class="s0">before </span><span class="s1">{</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
        <span class="s2">opacity</span><span class="s1">: </span><span class="s13">0.7</span><span class="s1">;</span>
        <span class="s2">color</span><span class="s1">: </span><span class="s3">white</span><span class="s1">;</span>
        <span class="s2">content</span><span class="s1">: </span><span class="s3">&quot;RATING&quot;</span><span class="s1">;</span>
        <span class="s2">margin-bottom</span><span class="s1">: </span><span class="s13">0.5</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">font-weight</span><span class="s1">: </span><span class="s13">400</span><span class="s1">;</span>
        <span class="s2">font-size</span><span class="s1">: </span><span class="s13">16</span><span class="s3">px</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#popularity-header </span><span class="s1">{</span>
        <span class="s2">margin-left</span><span class="s1">: </span><span class="s13">3</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">color</span><span class="s1">: </span><span class="s3">white</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#popularity-header</span><span class="s1">:</span><span class="s0">before </span><span class="s1">{</span>
        <span class="s2">content</span><span class="s1">: </span><span class="s3">&quot;POPULARITY&quot;</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">i </span><span class="s1">{</span>
        <span class="s2">color</span><span class="s1">: </span><span class="s3">orange</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">span </span><span class="s1">{</span>
        <span class="s2">color</span><span class="s1">: </span><span class="s3">yellow</span>
    <span class="s1">}</span>

    <span class="s0">i</span><span class="s1">,</span>
    <span class="s0">span </span><span class="s1">{</span>
        <span class="s2">margin-right</span><span class="s1">: </span><span class="s13">0.5</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#watchlist-button </span><span class="s1">{</span>
        <span class="s2">width</span><span class="s1">: </span><span class="s13">15</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">height</span><span class="s1">: </span><span class="s13">2</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">border-radius</span><span class="s1">: </span><span class="s13">5</span><span class="s3">px</span><span class="s1">;</span>
        <span class="s2">font-weight</span><span class="s1">: </span><span class="s13">700</span><span class="s1">;</span>
        <span class="s2">background-color</span><span class="s1">: </span><span class="s15">#f7e70b</span><span class="s1">;</span>
        <span class="s2">border</span><span class="s1">: </span><span class="s3">none</span><span class="s1">;</span>
        <span class="s2">margin</span><span class="s1">: </span><span class="s13">1</span><span class="s3">rem </span><span class="s13">0 1</span><span class="s3">rem </span><span class="s13">60</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#watchlist-button</span><span class="s1">:</span><span class="s0">hover </span><span class="s1">{</span>
        <span class="s2">background-color</span><span class="s1">: </span><span class="s15">#837b09</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">button</span><span class="s1">:</span><span class="s0">hover </span><span class="s1">{</span>
        <span class="s2">cursor</span><span class="s1">: </span><span class="s3">pointer</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#watchlist-button</span><span class="s1">:</span><span class="s0">disabled </span><span class="s1">{</span>
        <span class="s2">background-color</span><span class="s1">: </span><span class="s3">grey</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">title-div </span><span class="s1">{</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">plus </span><span class="s1">{</span>
        <span class="s2">color</span><span class="s1">: </span><span class="s3">black</span><span class="s1">;</span>
    <span class="s1">}</span>

<span class="s0">&lt;/style&gt;</span>
</pre>
</body>
</html>