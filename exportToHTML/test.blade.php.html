<html>
<head>
<title>test.blade.php</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #d5b778;}
.s1 { color: #bcbec4;}
.s2 { color: #bababa;}
.s3 { color: #6aab73;}
.s4 { color: #cf8e6d;}
.s5 { color: #bcbec4;}
.s6 { color: #6aab73;}
.s7 { color: #bcbec4;}
.s8 { color: #9876aa;}
.s9 { color: #2aacb8;}
.s10 { color: #cf8e6d;}
.s11 { color: #2aacb8;}
.s12 { color: #56a8f5;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
test.blade.php</font>
</center></td></tr></table>
<pre><span class="s0">&lt;!DOCTYPE </span><span class="s2">html</span><span class="s0">&gt;</span>
<span class="s0">&lt;html </span><span class="s2">lang</span><span class="s3">=&quot;en&quot;</span><span class="s0">&gt;</span>

<span class="s0">&lt;head&gt;</span>
    <span class="s0">&lt;meta </span><span class="s2">charset</span><span class="s3">=&quot;UTF-8&quot;</span><span class="s0">&gt;</span>
    <span class="s0">&lt;meta </span><span class="s2">name</span><span class="s3">=&quot;viewport&quot; </span><span class="s2">content</span><span class="s3">=&quot;width=device-width, initial-scale=1.0&quot;</span><span class="s0">&gt;</span>
    <span class="s0">&lt;title&gt;</span><span class="s1">Document</span><span class="s0">&lt;/title&gt;</span>
    <span class="s0">&lt;script </span><span class="s2">src</span><span class="s3">=&quot;https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js&quot;</span><span class="s0">&gt;&lt;/script&gt;</span>
    <span class="s0">&lt;script </span><span class="s2">src</span><span class="s3">=&quot;https://kit.fontawesome.com/d826f0fb4b.js&quot; </span><span class="s2">crossorigin</span><span class="s3">=&quot;anonymous&quot;</span><span class="s0">&gt;&lt;/script&gt;</span>
<span class="s0">&lt;/head&gt;</span>

<span class="s0">&lt;body&gt;</span>
    <span class="s4">@include(</span><span class="s6">'search'</span><span class="s4">)</span>
    <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;innerbody&quot;</span><span class="s0">&gt;</span>
        <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;title-div&quot;</span><span class="s0">&gt;</span>
            <span class="s0">&lt;h1&gt;</span><span class="s1">Popular movies</span><span class="s0">&lt;/h1&gt;</span>
            <span class="s4">&lt;?php if </span><span class="s7">(session()-&gt;has(</span><span class="s6">'user'</span><span class="s7">)) {</span>
                <span class="s8">$temp </span><span class="s7">= session(</span><span class="s6">'user'</span><span class="s7">);</span>
                <span class="s4">echo </span><span class="s8">$temp</span><span class="s7">-&gt;name;</span>
            <span class="s7">}</span>
            <span class="s4">?&gt;</span>
        <span class="s0">&lt;/div&gt;</span>
        <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;searchPoster&quot;</span><span class="s0">&gt;&lt;/div&gt;</span>
        <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;poster-div&quot;</span><span class="s0">&gt;</span>
            <span class="s0">&lt;button </span><span class="s2">id</span><span class="s3">=&quot;left-arrow&quot; </span><span class="s2">style</span><span class="s3">=&quot;</span><span class="s2">visibility</span><span class="s1">: </span><span class="s3">hidden&quot;</span><span class="s0">&gt;&lt;i </span><span class="s2">class</span><span class="s3">=&quot;fa-solid fa-chevron-left&quot;</span><span class="s0">&gt;&lt;/i&gt;&lt;/button&gt;</span>
            <span class="s4">&lt;?php</span>
            <span class="s8">$data </span><span class="s7">= session(</span><span class="s6">'data'</span><span class="s7">);</span>
            <span class="s8">$poster </span><span class="s7">= session(</span><span class="s6">'poster'</span><span class="s7">);</span>
            <span class="s4">if </span><span class="s7">(</span><span class="s4">isset</span><span class="s7">(</span><span class="s8">$data</span><span class="s7">)) {</span>
                <span class="s4">for </span><span class="s7">(</span><span class="s8">$i </span><span class="s7">= </span><span class="s9">0</span><span class="s7">; </span><span class="s8">$i </span><span class="s7">&lt; </span><span class="s9">6</span><span class="s7">; </span><span class="s8">$i</span><span class="s7">++) {</span>
                    <span class="s4">echo </span><span class="s6">'&lt;a class=&quot;redposter&quot;&gt;&lt;img class=&quot;redposterimg poster&quot; src=&quot;https://image.tmdb.org/t/p/w500' </span><span class="s7">. </span><span class="s8">$data</span><span class="s7">[</span><span class="s8">$i</span><span class="s7">]-&gt;poster_path . </span><span class="s6">'&quot;&gt;&lt;/a&gt;'</span><span class="s7">;</span>
                <span class="s7">}</span>
            <span class="s7">}</span>
            <span class="s4">?&gt;</span>
            <span class="s0">&lt;button </span><span class="s2">id</span><span class="s3">=&quot;right-arrow&quot;</span><span class="s0">&gt;&lt;i </span><span class="s2">class</span><span class="s3">=&quot;fa-solid fa-chevron-right&quot;</span><span class="s0">&gt;&lt;/i&gt;&lt;/button&gt;</span>
        <span class="s0">&lt;/div&gt;</span>
        <span class="s0">&lt;h1 </span><span class="s2">id</span><span class="s3">=&quot;watchlist-title&quot;</span><span class="s0">&gt;</span><span class="s1">Your Watchlist</span><span class="s0">&lt;/h1&gt;</span>
        <span class="s0">&lt;div </span><span class="s2">id</span><span class="s3">=&quot;watchlist-div&quot;</span><span class="s0">&gt;</span>

        <span class="s0">&lt;/div&gt;</span>
    <span class="s0">&lt;/div&gt;</span>
    <span class="s0">&lt;script&gt;</span>
        <span class="s10">let </span><span class="s1">counter = </span><span class="s11">0</span><span class="s1">;</span>
        <span class="s10">let </span><span class="s1">data = </span><span class="s4">&lt;?php echo </span><span class="s7">json_encode(</span><span class="s8">$data</span><span class="s7">); </span><span class="s4">?&gt;</span><span class="s1">;</span>

        <span class="s10">let </span><span class="s1">posterdiv = document.querySelectorAll(</span><span class="s3">'.redposterimg'</span><span class="s1">);</span>
        <span class="s10">let </span><span class="s1">rightarrow = document.querySelector(</span><span class="s3">'#right-arrow'</span><span class="s1">);</span>
        <span class="s10">let </span><span class="s1">leftarrow = document.querySelector(</span><span class="s3">'#left-arrow'</span><span class="s1">);</span>
        <span class="s1">rightarrow.addEventListener(</span><span class="s3">'click'</span><span class="s1">, (event) =&gt; {</span>
            <span class="s1">counter++;</span>
            <span class="s1">posterdiv.forEach((element, i) =&gt; {</span>
                <span class="s1">element.setAttribute(</span><span class="s3">'src'</span><span class="s1">, </span><span class="s3">'https://image.tmdb.org/t/p/w500' </span><span class="s1">+ data[i + counter]</span>
                    <span class="s1">.poster_path);</span>
            <span class="s1">})</span>
            <span class="s10">if </span><span class="s1">(counter &gt; </span><span class="s11">4</span><span class="s1">) rightarrow.style.visibility = </span><span class="s3">&quot;hidden&quot;</span><span class="s1">;</span>
            <span class="s10">else </span><span class="s1">rightarrow.style.visibility = </span><span class="s3">&quot;visible&quot;</span><span class="s1">;</span>
            <span class="s10">if </span><span class="s1">(counter &gt; </span><span class="s11">0</span><span class="s1">) leftarrow.style.visibility = </span><span class="s3">&quot;visible&quot;</span><span class="s1">;</span>
            <span class="s10">else </span><span class="s1">leftarrow.style.visibility = </span><span class="s3">&quot;hidden&quot;</span><span class="s1">;</span>
        <span class="s1">})</span>

        <span class="s1">leftarrow.addEventListener(</span><span class="s3">'click'</span><span class="s1">, (event) =&gt; {</span>
            <span class="s1">counter--;</span>
            <span class="s1">posterdiv.forEach((element, i) =&gt; {</span>
                <span class="s1">element.setAttribute(</span><span class="s3">'src'</span><span class="s1">, </span><span class="s3">'https://image.tmdb.org/t/p/w500' </span><span class="s1">+ data[i + counter]</span>
                    <span class="s1">.poster_path);</span>
            <span class="s1">})</span>
            <span class="s10">if </span><span class="s1">(counter &gt; </span><span class="s11">0</span><span class="s1">) leftarrow.style.visibility = </span><span class="s3">&quot;visible&quot;</span><span class="s1">;</span>
            <span class="s10">else </span><span class="s1">leftarrow.style.visibility = </span><span class="s3">&quot;hidden&quot;</span>
            <span class="s10">if </span><span class="s1">(counter &gt; </span><span class="s11">4</span><span class="s1">) rightarrow.style.visibility = </span><span class="s3">&quot;hidden&quot;</span>
            <span class="s10">else </span><span class="s1">rightarrow.style.visibility = </span><span class="s3">&quot;visible&quot;</span><span class="s1">;</span>
        <span class="s1">})</span>

        <span class="s1">async </span><span class="s10">function </span><span class="s1">getPosterPath(movie_id) {</span>
            <span class="s10">return </span><span class="s1">fetch(</span><span class="s3">`/api/getPosterPath/</span><span class="s1">${movie_id}</span><span class="s3">`</span><span class="s1">, {</span>
                <span class="s1">method: </span><span class="s3">&quot;GET&quot;</span>
            <span class="s1">}).then(async (result) =&gt; {</span>
                <span class="s10">return </span><span class="s1">result.json();</span>
            <span class="s1">})</span>
        <span class="s1">}</span>

        <span class="s1">async </span><span class="s10">function </span><span class="s1">getWatchlist(id) {</span>
            <span class="s10">return </span><span class="s1">fetch(</span><span class="s3">`/api/getUserWatchlist/</span><span class="s1">${id}</span><span class="s3">`</span><span class="s1">, {</span>
                <span class="s1">method: </span><span class="s3">&quot;GET&quot;</span>
            <span class="s1">}).then(async (result) =&gt; {</span>
                <span class="s10">return </span><span class="s1">result.json();</span>
            <span class="s1">})</span>
        <span class="s1">}</span>


        <span class="s1">getWatchlist(</span>
            <span class="s4">@if (</span><span class="s7">session()-&gt;has(</span><span class="s6">'user'</span><span class="s7">)</span><span class="s4">)</span>
                <span class="s7">{{ session(</span><span class="s6">'user'</span><span class="s7">)-&gt;id }}</span>
            <span class="s4">@else</span>
                <span class="s1">-</span><span class="s11">1</span>
            <span class="s4">@endif</span>
        <span class="s4">)</span><span class="s1">.then(async (response) =&gt; {</span>
            <span class="s10">let </span><span class="s1">div = document.querySelector(</span><span class="s3">'#watchlist-div'</span><span class="s1">);</span>
            <span class="s10">if </span><span class="s1">(response.length == </span><span class="s11">0</span><span class="s1">) {</span>
                <span class="s10">let </span><span class="s1">text = document.createElement(</span><span class="s3">'p'</span><span class="s1">);</span>
                <span class="s4">@if (</span><span class="s7">session()-&gt;has(</span><span class="s6">'user'</span><span class="s7">)</span><span class="s4">)</span>
                    <span class="s1">text.innerHTML = </span><span class="s3">&quot;Your watchlist is empty. Go to a movies page to add it to your watchlist&quot;</span><span class="s1">;</span>
                <span class="s4">@else</span>
                    <span class="s1">text.innerHTML = </span><span class="s3">&quot;Login to access your watchlist&quot;</span>
                <span class="s4">@endif</span>

                <span class="s1">text.setAttribute(</span><span class="s3">'id'</span><span class="s1">, </span><span class="s3">'emptywatchlist'</span><span class="s1">)</span>
                <span class="s1">div.appendChild(text);</span>
            <span class="s1">}</span>
            <span class="s10">for </span><span class="s1">(</span><span class="s10">let </span><span class="s1">i = </span><span class="s11">0</span><span class="s1">; i &lt; </span><span class="s11">6</span><span class="s1">; i++) {</span>
                <span class="s10">let </span><span class="s1">movie = document.createElement(</span><span class="s3">'img'</span><span class="s1">);</span>
                <span class="s10">let </span><span class="s1">a = document.createElement(</span><span class="s3">'a'</span><span class="s1">)</span>
                <span class="s1">a.setAttribute(</span><span class="s3">'class'</span><span class="s1">, </span><span class="s3">'redposter'</span><span class="s1">)</span>
                <span class="s10">if </span><span class="s1">(i &lt; response.length) {</span>
                    <span class="s10">let </span><span class="s1">posterpath = await getPosterPath(response[i].movie_id);</span>
                    <span class="s1">movie.setAttribute(</span><span class="s3">'src'</span><span class="s1">, </span><span class="s3">`https://image.tmdb.org/t/p/w500</span><span class="s1">${posterpath.poster_path}</span><span class="s3">`</span><span class="s1">)</span>
                    <span class="s1">a.setAttribute(</span><span class="s3">'href'</span><span class="s1">, </span><span class="s3">`/movie/</span><span class="s1">${response[i].movie_id}</span><span class="s3">`</span><span class="s1">)</span>
                <span class="s1">} </span><span class="s10">else </span><span class="s1">{</span>
                    <span class="s1">movie.style.visibility = </span><span class="s3">'hidden'</span><span class="s1">;</span>
                <span class="s1">}</span>

                <span class="s1">movie.setAttribute(</span><span class="s3">'class'</span><span class="s1">, </span><span class="s3">'poster'</span><span class="s1">)</span>
                <span class="s1">a.appendChild(movie)</span>
                <span class="s1">div.appendChild(a)</span>
            <span class="s1">}</span>
        <span class="s1">})</span>

        <span class="s1">document.querySelector(</span><span class="s3">&quot;#form&quot;</span><span class="s1">).addEventListener(</span><span class="s3">&quot;submit&quot;</span><span class="s1">, (event) =&gt; {</span>
            <span class="s1">event.preventDefault();</span>
            <span class="s10">const </span><span class="s1">input = document.querySelector(</span><span class="s3">&quot;#input&quot;</span><span class="s1">).value;</span>
            <span class="s1">$.ajax({</span>
                <span class="s1">url: </span><span class="s3">'api/test/' </span><span class="s1">+ input,</span>
                <span class="s1">type: </span><span class="s3">&quot;GET&quot;</span><span class="s1">,</span>
                <span class="s1">success: (result) =&gt; {</span>
                    <span class="s1">document.querySelector(</span><span class="s3">'#searchPoster'</span><span class="s1">).innerHTML +=</span>
                        <span class="s3">`&lt;img class=&quot;poster&quot; src=&quot;https://image.tmdb.org/t/p/w500</span><span class="s1">${result}</span><span class="s3">&quot;&gt;`</span>
                <span class="s1">}</span>
            <span class="s1">})</span>
        <span class="s1">});</span>

        <span class="s10">var </span><span class="s1">posters = document.querySelectorAll(</span><span class="s3">&quot;.redposter&quot;</span><span class="s1">);</span>

        <span class="s1">posters.forEach((element, i) =&gt; {</span>
            <span class="s1">element.addEventListener(</span><span class="s3">'click'</span><span class="s1">, (event) =&gt; {</span>
                <span class="s1">window.location.href = </span><span class="s3">'/movie/' </span><span class="s1">+ data[i + counter].id;</span>
            <span class="s1">})</span>
        <span class="s1">})</span>
    <span class="s0">&lt;/script&gt;</span>
<span class="s0">&lt;/body&gt;</span>

<span class="s0">&lt;/html&gt;</span>
<span class="s0">&lt;style&gt;</span>
    <span class="s0">#image </span><span class="s1">{</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">body </span><span class="s1">{</span>
        <span class="s2">background-color</span><span class="s1">: </span><span class="s12">#000</span><span class="s1">;</span>
        <span class="s2">color</span><span class="s1">: </span><span class="s3">white</span><span class="s1">;</span>
        <span class="s2">margin</span><span class="s1">: </span><span class="s11">0</span><span class="s1">;</span>
        <span class="s2">padding</span><span class="s1">: </span><span class="s11">0</span><span class="s1">;</span>
        <span class="s2">min-height</span><span class="s1">: </span><span class="s11">100</span><span class="s3">vh</span><span class="s1">;</span>
        <span class="s2">height</span><span class="s1">: </span><span class="s11">100</span><span class="s1">%;</span>
    <span class="s1">}</span>

    <span class="s0">h1 </span><span class="s1">{</span>
        <span class="s2">font-size</span><span class="s1">: </span><span class="s11">26</span><span class="s3">px</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#innerbody </span><span class="s1">{</span>
        <span class="s2">background-color</span><span class="s1">: </span><span class="s12">#111</span><span class="s1">;</span>
        <span class="s2">margin</span><span class="s1">: </span><span class="s3">auto</span><span class="s1">;</span>
        <span class="s2">min-height</span><span class="s1">: </span><span class="s3">inherit</span><span class="s1">;</span>
        <span class="s2">height</span><span class="s1">: </span><span class="s3">inherit</span><span class="s1">;</span>
        <span class="s2">padding</span><span class="s1">: </span><span class="s11">0 2</span><span class="s3">rem </span><span class="s11">10</span><span class="s3">rem </span><span class="s11">2</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">max-width</span><span class="s1">: </span><span class="s11">75</span><span class="s1">%;</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
        <span class="s2">flex-direction</span><span class="s1">: </span><span class="s3">column</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">poster </span><span class="s1">{</span>
        <span class="s2">width</span><span class="s1">: </span><span class="s11">150</span><span class="s3">px</span><span class="s1">;</span>
        <span class="s2">height</span><span class="s1">: </span><span class="s11">225</span><span class="s3">px</span><span class="s1">;</span>
        <span class="s2">padding</span><span class="s1">: </span><span class="s11">1</span><span class="s3">vh</span><span class="s1">;</span>
        <span class="s2">margin</span><span class="s1">: </span><span class="s11">0 1</span><span class="s3">rem </span><span class="s11">0 1</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">redposter </span><span class="s1">{</span>
        <span class="s2">background-color</span><span class="s1">: </span><span class="s12">#222</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#poster-div</span><span class="s1">,</span>
    <span class="s0">#watchlist-div </span><span class="s1">{</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
        <span class="s2">place-content</span><span class="s1">: </span><span class="s3">center</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#title-div</span><span class="s1">,</span>
    <span class="s0">#watchlist-title </span><span class="s1">{</span>
        <span class="s2">margin-top</span><span class="s1">: </span><span class="s11">2</span><span class="s3">rem</span><span class="s1">;</span>
        <span class="s2">margin-left</span><span class="s1">: </span><span class="s11">9</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#right-arrow </span><span class="s1">{</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
        <span class="s2">place-self</span><span class="s1">: </span><span class="s3">center</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#left-arrow </span><span class="s1">{</span>
        <span class="s2">display</span><span class="s1">: </span><span class="s3">flex</span><span class="s1">;</span>
        <span class="s2">place-self</span><span class="s1">: </span><span class="s3">center</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#left-arrow</span><span class="s1">,</span>
    <span class="s0">#right-arrow </span><span class="s1">{</span>
        <span class="s2">border</span><span class="s1">: </span><span class="s3">none</span><span class="s1">;</span>
        <span class="s2">background</span><span class="s1">: </span><span class="s3">none</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s1">.</span><span class="s0">fa-solid </span><span class="s1">{</span>
        <span class="s2">color</span><span class="s1">: </span><span class="s3">white</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#right-arrow</span><span class="s1">:</span><span class="s0">hover</span><span class="s1">,</span>
    <span class="s0">#left-arrow</span><span class="s1">:</span><span class="s0">hover </span><span class="s1">{</span>
        <span class="s2">opacity</span><span class="s1">: </span><span class="s11">0.8</span><span class="s1">;</span>
    <span class="s1">}</span>

    <span class="s0">#emptywatchlist </span><span class="s1">{</span>
        <span class="s2">position</span><span class="s1">: </span><span class="s3">absolute</span><span class="s1">;</span>
        <span class="s2">margin-top</span><span class="s1">: </span><span class="s11">7</span><span class="s3">rem</span><span class="s1">;</span>
    <span class="s1">}</span>
<span class="s0">&lt;/style&gt;</span>
</pre>
</body>
</html>